webpackJsonp([1],{JHQJ:function(t,n){},JpVA:function(t,n){},MCyH:function(t,n){},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("7+uW"),r={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",[n("router-link",{attrs:{to:"/"}},[this._v("Home")])],1),this._v(" "),n("router-view")],1)},staticRenderFns:[]};var c=e("VU/8")({name:"App"},r,!1,function(t){e("JHQJ")},null,null).exports,s=e("/ocq"),o={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("h2",[t._v("Basic")]),t._v(" "),e("ul",[e("li",{staticClass:"demo"},[e("router-link",{attrs:{to:"/calc1"}},[t._v("シンプルな電卓")]),t._v(" "),t._m(0)],1),t._v(" "),e("li",{staticClass:"demo"},[e("router-link",{attrs:{to:"/calc2"}},[t._v("シンプルな電卓の改良")]),t._v(" "),t._m(1)],1),t._v(" "),e("li",{staticClass:"demo"},[e("router-link",{attrs:{to:"/calc3"}},[t._v("\n        シンプルな電卓の改良＋丸め誤差への対応\n      ")]),t._v(" "),t._m(2)],1)]),t._v(" "),e("h2",[t._v("Standard")]),t._v(" "),e("ul",[e("li",{staticClass:"demo"},[e("router-link",{attrs:{to:"/calc4"}},[t._v("括弧つき四則演算ができる電卓 (気楽)")]),t._v(" "),t._m(3)],1)]),t._v(" "),e("h2",[t._v("Advanced")]),t._v(" "),e("ul",[e("li",{staticClass:"demo"},[e("router-link",{attrs:{to:"/calc4"}},[t._v("括弧つき四則演算ができる電卓 (本気)")]),t._v(" "),t._m(4)],1)])])},staticRenderFns:[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ul",{staticClass:"desc"},[e("li",[t._v("深く考えずに素直に書いてみる")]),t._v(" "),e("li",[t._v("\n          二個目の演算子が入力された時点で逐次計算することにより、計算順序を意識しなくてすむ\n        ")]),t._v(" "),e("li",[t._v("\n          基本的に最新の計算結果の値\n          "),e("code",[t._v("val")]),t._v(" を一つだけ保持しておけばよい\n        ")]),t._v(" "),e("li",[t._v("簡単化のため、キーボードでの入力は受け付けない")]),t._v(" "),e("li",[t._v("実際に書いてみると、意外と考えることが多い")]),t._v(" "),e("li",[e("b",[t._v("学習ポイント")]),t._v(": Vueのdataを使いこなせる")])])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ul",{staticClass:"desc"},[e("li",[t._v("逐次計算する方針は引き継ぐ")]),t._v(" "),e("li",[t._v("\n          入力文字列を単に結合して一つの値として保持するのではなく、\n          "),e("code",[t._v("leftNum (数値), op (演算子), rightNum (数値)")]),t._v("\n          の組を意識して配列値 "),e("code",[t._v("toks")]),t._v(" として格納しておく\n        ")]),t._v(" "),e("li",[t._v("途中式の解釈が楽になったので、小数の入力にも対応した")]),t._v(" "),e("li",[e("b",[t._v("学習ポイント")]),t._v(": Vueのdataとcomputedを使いこなせる")])])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ul",{staticClass:"desc"},[e("li",[e("code",[t._v("1.1 * 1.1")]),t._v(" の計算結果が\n          "),e("code",[t._v("1.2100000000000002")]),t._v(" のようになってしまう現象に対応する\n        ")]),t._v(" "),e("li",[t._v("\n          参考:\n          "),e("a",{attrs:{href:"https://typescriptbook.jp/reference/values-types-variables/number/decimal-calculation-error",target:"_blank",rel:"noopener noreferrer"}},[t._v("小数計算の誤差 - サバイバルTypeScript")])]),t._v(" "),e("li",[t._v("\n          今回は\n          "),e("a",{attrs:{href:"https://github.com/MikeMcl/bignumber.js/",target:"_blank",rel:"noopener noreferrer"}},[t._v("bignumber.js")]),t._v("\n          というライブラリを使って解決した\n        ")]),t._v(" "),e("li",[t._v("\n          ついでにボタンの描画をv-forを使ってきれいに書いてみる\n        ")]),t._v(" "),e("li",[e("b",[t._v("学習ポイント")]),t._v(":\n          Vueのv-forを使いこなせる。第三者が提供するnpmライブラリを導入できる。\n        ")])])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ul",{staticClass:"desc"},[e("li",[t._v("逐次計算方式を卒業する")]),t._v(" "),e("li",[t._v("\n          途中式をすべて文字列として保持しておき、「=」が入力された時点で計算する\n        ")]),t._v(" "),e("li",[t._v("\n          まずは雰囲気を掴むために、非推奨な手法だが\n          "),e("code",[t._v("new Function()")]),t._v("\n          を用いて、関数内部に与えた文字列をそのまま評価させる方針で実装してみる。計算をブラウザのJavaScriptエンジンに任せることで、四則演算の優先順序などを気にする必要がない。\n        ")]),t._v(" "),e("li",[t._v("\n          類似手法として、もっと非推奨だが、"),e("code",[t._v("eval()")]),t._v("\n          関数を用いるアイデアもある\n        ")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://developer.mozilla.org/ja/docs/orphaned/Web",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN")]),t._v("などのドキュメントで、なぜこれらが非推奨なのかを調べてみよう。また、両者の違いはなんだろうか？\n        ")]),t._v(" "),e("li",[e("b",[t._v("学習ポイント")]),t._v(": MDNのドキュメントでJavaScriptの仕様を調査できる\n        ")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("ul",{staticClass:"desc"},[n("li",[this._v("大学レベルです")])])}]},l=e("VU/8")(null,o,!1,null,null,null).exports,a=/[\+\-\*\/]/,u=function(t){var n=t.split(new RegExp("("+a.source+")")).map(function(t){return t.trim()}).filter(function(t){return!!t}),e=void 0,i=void 0,r=void 0;if(3===n.length)e=n[1],i=Number(n[0]),r=Number(n[2]);else if(4===n.length){var c=n[0];a.test(c)?(e=n[2],i=Number(n[0]+n[1]),r=Number(n[3])):(e=n[1],i=Number(n[0]),r=Number(n[2]+n[3]))}else 5===n.length&&(e=n[2],i=Number(n[0]+n[1]),r=Number(n[3]+n[4]));if(void 0===i||void 0===r||void 0===e)return t;switch(e){case"+":return i+r;case"-":return i-r;case"*":return i*r;case"/":return i/r}return t},v={name:"Calculator1",data:function(){return{val:""}},methods:{clear:function(){this.val=""},click:function(t){if(["NaN","Infinity","-Infinity"].includes(this.val)&&(this.val=""),""!==this.val||!a.test(t)||"-"===t)if(0===t&&["","0"].includes(this.val))this.val="0";else if("="===t)this.val=""+u(this.val);else if(a.test(t)){var n=this.val[this.val.length-1];if(a.test(n)){if("-"!==t||["+","-"].includes(n))return;this.val+=""+t}else a.test(this.val)?this.val=""+u(this.val)+t:this.val+=""+t}else this.val+=""+t,this.val=this.val.replace(/^00+/,"0")}}},_={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"calc-container"},[e("div",{staticClass:"calc-title",on:{click:t.clear}},[t._v("シンプルな電卓")]),t._v(" "),e("div",{staticClass:"calc"},[e("div",{staticClass:"calc-expr"},[e("input",{attrs:{readonly:"",placeholder:"0"},domProps:{value:t.val}})]),t._v(" "),e("div",{staticClass:"calc-row"},[e("button",{on:{click:function(){return t.click(1)}}},[t._v("1")]),t._v(" "),e("button",{on:{click:function(){return t.click(2)}}},[t._v("2")]),t._v(" "),e("button",{on:{click:function(){return t.click(3)}}},[t._v("3")]),t._v(" "),e("button",{on:{click:function(){return t.click("+")}}},[t._v("+")])]),t._v(" "),e("div",{staticClass:"calc-row"},[e("button",{on:{click:function(){return t.click(4)}}},[t._v("4")]),t._v(" "),e("button",{on:{click:function(){return t.click(5)}}},[t._v("5")]),t._v(" "),e("button",{on:{click:function(){return t.click(6)}}},[t._v("6")]),t._v(" "),e("button",{on:{click:function(){return t.click("-")}}},[t._v("-")])]),t._v(" "),e("div",{staticClass:"calc-row"},[e("button",{on:{click:function(){return t.click(7)}}},[t._v("7")]),t._v(" "),e("button",{on:{click:function(){return t.click(8)}}},[t._v("8")]),t._v(" "),e("button",{on:{click:function(){return t.click(9)}}},[t._v("9")]),t._v(" "),e("button",{on:{click:function(){return t.click("*")}}},[t._v("*")])]),t._v(" "),e("div",{staticClass:"calc-row"},[e("button",{staticStyle:{width:"calc(50% + 8px)"},on:{click:function(){return t.click(0)}}},[t._v("\n        0\n      ")]),t._v(" "),e("button",{on:{click:function(){return t.click("=")}}},[t._v("=")]),t._v(" "),e("button",{on:{click:function(){return t.click("/")}}},[t._v("/")])])]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("div",[n("a",{staticClass:"ref",attrs:{href:"https://github.com/daiiz/vue-calculator/blob/master/src/components/Calculator1.vue",target:"_blank",rel:"noopener noreferrer"}},[this._v("\n      ソースコードを見る\n    ")])])}]};var f=e("VU/8")(v,_,!1,function(t){e("SqLn")},"data-v-66c7894c",null).exports,h=e("d7EF"),d=e.n(h),k=/[\+\-\*\/]/,p={name:"Calculator2",data:function(){return{toks:["","",""]}},computed:{expr:{get:function(){return this.toks.join("")}}},methods:{getCurrentTok:function(){var t=this.toks.filter(function(t){return!!t});if(0===t.length)return["",0];var n=t.length-1;return[t[n],n]},setToks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.$set(this.toks,0,t),this.$set(this.toks,1,n),this.$set(this.toks,2,e)},click:function(t){var n=this.toks[0];["NaN","Infinity","-Infinity"].includes(n)&&this.setToks();var e=this.getCurrentTok(),i=d()(e,2),r=i[0],c=i[1];if(k.test(t)||"="===t){if(2===c){var s=function(t,n,e){var i=Number(t),r=Number(e);switch(n){case"+":return i+r;case"-":return i-r;case"*":return i*r;case"/":return i/r}throw new Error("Invalid op: "+n)}(this.toks[0],this.toks[1],this.toks[2]),o="="===t?"":t;return void this.setToks(""+s,o,"")}if("="===t)return;if("-"===t){if(0===c&&""===r)return void this.$set(this.toks,c,t);if(1===c&&!["+","-"].includes(r)&&k.test(r))return void this.$set(this.toks,c+1,t)}1===c?this.$set(this.toks,c,t):0===c&&/[0-9]$/.test(r)&&this.$set(this.toks,c+1,t)}else{if("."===t&&(0!==c&&2!==c||r.includes(".")))return;var l=1===c?c+1:c,a=1===c?""+t:""+r+t;this.$set(this.toks,l,a.replace(/^00+/,"0"))}}}},m={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"calc-container"},[e("div",{staticClass:"calc-title",on:{click:function(){return t.setToks()}}},[t._v("\n    シンプルな電卓の改良\n  ")]),t._v(" "),e("div",{staticClass:"calc"},[e("div",{staticClass:"calc-expr"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.expr,expression:"expr"}],attrs:{readonly:"",placeholder:"0"},domProps:{value:t.expr},on:{input:function(n){n.target.composing||(t.expr=n.target.value)}}})]),t._v(" "),e("div",{staticClass:"calc-row"},[e("button",{on:{click:function(){return t.click(1)}}},[t._v("1")]),t._v(" "),e("button",{on:{click:function(){return t.click(2)}}},[t._v("2")]),t._v(" "),e("button",{on:{click:function(){return t.click(3)}}},[t._v("3")]),t._v(" "),e("button",{on:{click:function(){return t.click("+")}}},[t._v("+")])]),t._v(" "),e("div",{staticClass:"calc-row"},[e("button",{on:{click:function(){return t.click(4)}}},[t._v("4")]),t._v(" "),e("button",{on:{click:function(){return t.click(5)}}},[t._v("5")]),t._v(" "),e("button",{on:{click:function(){return t.click(6)}}},[t._v("6")]),t._v(" "),e("button",{on:{click:function(){return t.click("-")}}},[t._v("-")])]),t._v(" "),e("div",{staticClass:"calc-row"},[e("button",{on:{click:function(){return t.click(7)}}},[t._v("7")]),t._v(" "),e("button",{on:{click:function(){return t.click(8)}}},[t._v("8")]),t._v(" "),e("button",{on:{click:function(){return t.click(9)}}},[t._v("9")]),t._v(" "),e("button",{on:{click:function(){return t.click("*")}}},[t._v("*")])]),t._v(" "),e("div",{staticClass:"calc-row"},[e("button",{on:{click:function(){return t.click(0)}}},[t._v("0")]),t._v(" "),e("button",{on:{click:function(){return t.click(".")}}},[t._v(".")]),t._v(" "),e("button",{on:{click:function(){return t.click("=")}}},[t._v("=")]),t._v(" "),e("button",{on:{click:function(){return t.click("/")}}},[t._v("/")])])]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("div",[n("a",{staticClass:"ref",attrs:{href:"https://github.com/daiiz/vue-calculator/blob/master/src/components/Calculator2.vue",target:"_blank",rel:"noopener noreferrer"}},[this._v("\n      ソースコードを見る\n    ")])])}]};var b=e("VU/8")(p,m,!1,function(t){e("JpVA")},"data-v-192b72fe",null).exports,C=e("uotZ"),g=/[\+\-\*\/]/,x={name:"Calculator2",data:function(){return{buttons:[[1,2,3,"+"],[4,5,6,"-"],[7,8,9,"*"],[0,".","=","/"]],toks:["","",""]}},computed:{expr:{get:function(){return this.toks.join("")}}},methods:{getCurrentTok:function(){var t=this.toks.filter(function(t){return!!t});if(0===t.length)return["",0];var n=t.length-1;return[t[n],n]},setToks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.$set(this.toks,0,t),this.$set(this.toks,1,n),this.$set(this.toks,2,e)},click:function(t){var n=this.toks[0];["NaN","Infinity","-Infinity"].includes(n)&&this.setToks();var e=this.getCurrentTok(),i=d()(e,2),r=i[0],c=i[1];if(g.test(t)||"="===t){if(2===c){var s=function(t,n,e){var i=new C(Number(t)),r=new C(Number(e));switch(n){case"+":return i.plus(r);case"-":return i.minus(r);case"*":return i.multipliedBy(r);case"/":return i.dividedBy(r)}throw new Error("Invalid op: "+n)}(this.toks[0],this.toks[1],this.toks[2]),o="="===t?"":t;return void this.setToks(""+s,o,"")}if("="===t)return;if("-"===t){if(0===c&&""===r)return void this.$set(this.toks,c,t);if(1===c&&!["+","-"].includes(r)&&g.test(r))return void this.$set(this.toks,c+1,t)}1===c?this.$set(this.toks,c,t):0===c&&/[0-9]$/.test(r)&&this.$set(this.toks,c+1,t)}else{if("."===t&&(0!==c&&2!==c||r.includes(".")))return;var l=1===c?c+1:c,a=1===c?""+t:""+r+t;this.$set(this.toks,l,a.replace(/^00+/,"0"))}}}},$={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"calc-container"},[e("div",{staticClass:"calc-title",on:{click:function(){return t.setToks()}}},[t._v("\n    シンプルな電卓の改良＋丸め誤差への対応\n  ")]),t._v(" "),e("div",{staticClass:"calc"},[e("div",{staticClass:"calc-expr"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.expr,expression:"expr"}],attrs:{readonly:"",placeholder:"0"},domProps:{value:t.expr},on:{input:function(n){n.target.composing||(t.expr=n.target.value)}}})]),t._v(" "),t._l(t.buttons,function(n,i){return e("div",{key:i,staticClass:"calc-row"},t._l(n,function(n){return e("button",{key:n,on:{click:function(){return t.click(n)}}},[t._v("\n        "+t._s(n)+"\n      ")])}),0)})],2),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("div",[n("a",{staticClass:"ref",attrs:{href:"https://github.com/daiiz/vue-calculator/blob/master/src/components/Calculator3.vue",target:"_blank",rel:"noopener noreferrer"}},[this._v("\n      ソースコードを見る\n    ")])])}]};var N=e("VU/8")(x,$,!1,function(t){e("MCyH")},"data-v-81289556",null).exports,w={name:"Calculator4",data:function(){return{buttons:[[1,2,3,"+"],[4,5,6,"-"],[7,8,9,"*"],[0,".","=","/"]],expr:""}},methods:{clear:function(){this.expr=""},click:function(t){["NaN","Infinity","-Infinity"].includes(this.expr)&&(this.expr=""),this.expr="="!==t?""+this.expr+t:""+function(t){if(!t)return"";if(!/^[0-9.+\-*/()]+$/.test(t))return"NaN";try{return new Function("return "+t)()}catch(t){return console.error(t),"NaN"}}(this.expr)}}},y={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"calc-container"},[e("div",{staticClass:"calc-title",on:{click:function(){return t.clear()}}},[t._v("\n    括弧つき四則演算ができる電卓 (気楽)\n  ")]),t._v(" "),e("div",{staticClass:"calc"},[e("div",{staticClass:"calc-expr"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.expr,expression:"expr"}],attrs:{readonly:"",placeholder:"0"},domProps:{value:t.expr},on:{input:function(n){n.target.composing||(t.expr=n.target.value)}}})]),t._v(" "),t._l(t.buttons,function(n,i){return e("div",{key:i,staticClass:"calc-row"},t._l(n,function(n){return e("button",{key:n,on:{click:function(){return t.click(n)}}},[t._v("\n        "+t._s(n)+"\n      ")])}),0)})],2),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("div",[n("a",{staticClass:"ref",attrs:{href:"https://github.com/daiiz/vue-calculator/blob/master/src/components/Calculator4.vue",target:"_blank",rel:"noopener noreferrer"}},[this._v("\n      ソースコードを見る\n    ")])])}]};var E=e("VU/8")(w,y,!1,function(t){e("w4of")},"data-v-a3bb68e6",null).exports;i.a.use(s.a);var T=new s.a({routes:[{path:"/",name:"Main",component:l},{path:"/calc1",name:"Calc1",component:f},{path:"/calc2",name:"Calc2",component:b},{path:"/calc3",name:"Calc3",component:N},{path:"/calc4",name:"Calc4",component:E}]});e("slWF");i.a.config.productionTip=!1,new i.a({el:"#app",router:T,components:{App:c},template:"<App/>"})},SqLn:function(t,n){},slWF:function(t,n){},w4of:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.4eb4f97a1194d064ec60.js.map